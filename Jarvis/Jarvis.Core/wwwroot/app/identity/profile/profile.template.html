<section class="content-header">
    <h1>Thông tin cá nhân</h1>
    <ol class="breadcrumb">
        <li><a href="/"><i class="fa fa-dashboard"></i> Trang chủ</a></li>
        <li class="active">Thông tin cá nhân</li>
    </ol>
</section>

<section class="content container-fluid">
    <div class="row">
        <div class="col-md-3">
            <div class="box box-success">
                <div class="box-body box-profile">
                    <div style="position: relative;">
                        <img class="profile-user-img img-responsive img-circle object-fit-cover" role="button" ng-src="{{$ctrl.context.userInfo.avatarPath ? $ctrl.context.userInfo.avatarPath : 'imgs/avatar.png'}}" alt="{{$ctrl.context.userInfo.fullName}}" ng-click="$ctrl.showAvatar()" title="Xem ảnh">
                        <label for="fileAvatar" class="upload-button" role="button" title="Thay đổi ảnh đại diện"  ng-disabled="$ctrl.loading">
                            <i class="fa fa-camera" aria-hidden="true"></i>
                        </label>
                    </div>
                    <input type="file" accept="image/*" id="fileAvatar" style="display: none" ng-file-model ng-model="$ctrl.avatarPath" ng-file-name="$ctrl.avatarName" ng-change="$ctrl.changeAvatar()" />
                    <h3 class="profile-username text-center">{{$ctrl.context.userName}}</h3>
                    <p class="text-muted text-center">Sử dụng ngày {{$ctrl.context.createAt | date: 'dd/MM/yyyy'}}</p>

                    <ul class="list-group list-group-unbordered">
                        <li class="list-group-item"><b>Tài khoản</b> <a class="pull-right">{{$ctrl.context.userName}}</a></li>
                        <li class="list-group-item"><b>Phone</b> <a class="pull-right">{{$ctrl.context.phoneNumber}}</a></li>
                        <li class="list-group-item"><b>Email</b> <a class="pull-right overflow-ellipsis" title="{{$ctrl.context.email}}">{{$ctrl.context.email}}</a></li>
                    </ul>

                    <a class="btn btn-default btn-block" ng-click="$ctrl.ActChangePassword=false">Thay đổi thông tin cá nhân</a>
                    <a class="btn btn-default btn-block" ng-click="$ctrl.ActChangePassword=true">Đổi mật khẩu</a>
                    <button type="button" ng-click="$ctrl.delete()" class="btn btn-danger btn-block" ng-disabled="$ctrl.loading"><b>Xóa tài khoản</b></button>
                </div>
            </div>
            <!--<div class="box box-primary">
                <div class="box-header with-border"><h3 class="box-title">About Me</h3></div>
                <div class="box-body">
                    <strong><i class="fa fa-book margin-r-5"></i> Education</strong>
                    <p class="text-muted">B.S. in Computer Science from the University of Tennessee at Knoxville</p>

                    <hr>
                    <strong><i class="fa fa-map-marker margin-r-5"></i> Location</strong>

                    <p class="text-muted">Malibu, California</p>
                    <hr>

                    <strong><i class="fa fa-pencil margin-r-5"></i> Skills</strong>

                    <p>
                        <span class="label label-danger">UI Design</span>
                        <span class="label label-success">Coding</span>
                        <span class="label label-info">Javascript</span>
                        <span class="label label-warning">PHP</span>
                        <span class="label label-primary">Node.js</span>
                    </p>

                    <hr>

                    <strong><i class="fa fa-file-text-o margin-r-5"></i> Notes</strong>

                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam fermentum enim neque.</p>
                </div>
            </div>-->
        </div>

        <div class="col-md-9" ng-if="!$ctrl.ActChangePassword">
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    <li class="active"><a href="/profile#settings" data-toggle="tab">Thông tin cá nhân</a></li>
                    <!--<li><a href="/profile#timeline" data-toggle="tab">Lịch sử hoạt động</a></li>-->
                </ul>
                <div class="tab-content">
                    <div class="active tab-pane" id="settings">
                        <form name="frmProfile" ng-submit="$ctrl.save(frmProfile)" ng-validate="$ctrl.validationOptions" class="form-horizontal">
                            <div class="form-group">
                                <label class="col-sm-2 control-label">Họ tên</label>
                                <div class="col-sm-10">
                                    <input name="fullName" type="text" ng-model="$ctrl.user.fullName" jv-autofocus class="form-control" placeholder="Jarvis">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">Số điện thoại</label>
                                <div class="col-sm-10">
                                    <input name="phoneNumber" type="text" ng-model="$ctrl.user.phoneNumber" class="form-control" placeholder="0123456789">
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 control-label">Email</label>
                                <div class="col-sm-10">
                                    <input name="email" type="text" ng-model="$ctrl.user.email" class="form-control" placeholder="Email">
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-10">
                                    <button type="submit" class="btn btn-success" ng-disabled="$ctrl.loading"><i class="fa fa-save"></i> Lưu</button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="tab-pane" id="timeline">
                        <ul class="timeline timeline-inverse">
                            <li class="time-label">
                                <span class="bg-red">
                                    10 Feb. 2014
                                </span>
                            </li>
                            <li>
                                <i class="fa fa-envelope bg-blue"></i>

                                <div class="timeline-item">
                                    <span class="time"><i class="fa fa-clock-o"></i> 12:05</span>

                                    <h3 class="timeline-header"><a href="#">Support Team</a> sent you an email</h3>

                                    <div class="timeline-body">
                                        Etsy doostang zoodles disqus groupon greplin oooj voxy zoodles,
                                        weebly ning heekya handango imeem plugg dopplr jibjab, movity
                                        jajah plickers sifteo edmodo ifttt zimbra. Babblely odeo kaboodle
                                        quora plaxo ideeli hulu weebly balihoo...
                                    </div>
                                    <div class="timeline-footer">
                                        <a class="btn btn-primary btn-xs">Read more</a>
                                        <a class="btn btn-danger btn-xs">Delete</a>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <i class="fa fa-user bg-aqua"></i>

                                <div class="timeline-item">
                                    <span class="time"><i class="fa fa-clock-o"></i> 5 mins ago</span>

                                    <h3 class="timeline-header no-border">
                                        <a href="#">Sarah Young</a> accepted your friend request
                                    </h3>
                                </div>
                            </li>
                            <li>
                                <i class="fa fa-comments bg-yellow"></i>

                                <div class="timeline-item">
                                    <span class="time"><i class="fa fa-clock-o"></i> 27 mins ago</span>

                                    <h3 class="timeline-header"><a href="#">Jay White</a> commented on your post</h3>

                                    <div class="timeline-body">
                                        Take me to your leader!
                                        Switzerland is small and neutral!
                                        We are more like Germany, ambitious and misunderstood!
                                    </div>
                                    <div class="timeline-footer">
                                        <a class="btn btn-warning btn-flat btn-xs">View comment</a>
                                    </div>
                                </div>
                            </li>
                            <li class="time-label">
                                <span class="bg-green">
                                    3 Jan. 2014
                                </span>
                            </li>
                            <li>
                                <i class="fa fa-camera bg-purple"></i>

                                <div class="timeline-item">
                                    <span class="time"><i class="fa fa-clock-o"></i> 2 days ago</span>

                                    <h3 class="timeline-header"><a href="#">Mina Lee</a> uploaded new photos</h3>

                                    <div class="timeline-body">
                                        <img src="http://placehold.it/150x100" alt="..." class="margin">
                                        <img src="http://placehold.it/150x100" alt="..." class="margin">
                                        <img src="http://placehold.it/150x100" alt="..." class="margin">
                                        <img src="http://placehold.it/150x100" alt="..." class="margin">
                                    </div>
                                </div>
                            </li>
                            <li>
                                <i class="fa fa-clock-o bg-gray"></i>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-md-9" ng-if="$ctrl.ActChangePassword">
            <form name="frmChangePassword" ng-submit="$ctrl.changePassword(frmChangePassword)" ng-validate="$ctrl.validationOptionsChangePassword" class="form-horizontal">
                <div class="box box-success">
                    <div class="box-header with-border">
                        <h3 class="box-title">Đổi mật khẩu</h3>
                    </div>
                    <div class="box-body">
                        <div class="form-group">
                            <label class="col-md-2 control-label">Mật khẩu cũ</label>
                            <div class="col-md-10">
                                <input type="password" ng-model="$ctrl.password.oldPassword" name="oldPassword" class="form-control" placeholder="Mật khẩu cũ" jv-autofocus />
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">Mật khẩu mới</label>
                            <div class="col-md-10">
                                <input type="password" ng-model="$ctrl.password.newPassword" name="newPassword" id="new_password" class="form-control" placeholder="Mật khẩu mới">
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-2 control-label">Nhập lại khẩu mới</label>
                            <div class="col-md-10">
                                <input type="password" ng-model="$ctrl.password.confirmPassword" name="confirmPassword" class="form-control" placeholder="Mật khẩu mới">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-sm-offset-2 col-sm-10">
                                <button type="submit" class="btn btn-success" ng-disabled="$ctrl.loading"><i class="fa fa-check-square-o"></i> Xác nhận</button>
                            </div>
                        </div>
                    </div>

                </div>

            </form>
        </div>
    </div>
</section>

<section class="modal fade in" id="modal-avatar" data-backdrop="static" tabindex="-1">
    <div class="modal-dialog" style="width: 800px">
        <div class="modal-content">
            <div class="modal-header bg-green">
                <button type="button" class="close close-custom" data-dismiss="modal" aria-label="Close" ng-click="$ctrl.cancelAvatar()">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title">Chọn kích thước ảnh</h4>
            </div>
            <form name="frmAvatar" class="form-horizontal">
                <div class="modal-body">
                    <div class="form-group">
                        <div class="col-sm-3">
                            <label class="radio-inline">
                                <span ng-class="{'checked': $ctrl.typeImage === 'crop' }">
                                    <input type="radio" ng-value="'crop'" class="styled" ng-model="$ctrl.typeImage" ng-change="$ctrl.changeTypeImage()">
                                </span>
                                <span>Chọn vị trí cắt ảnh</span>
                            </label>
                        </div>
                        <div class="col-sm-3">
                            <label class="radio-inline">
                                <span ng-class="{'checked': $ctrl.typeImage === 'unCrop' }">
                                    <input type="radio" ng-value="'unCrop'" class="styled" ng-model="$ctrl.typeImage" ng-change="$ctrl.changeTypeImage()">
                                </span>
                                <span>Sử dụng toàn bộ ảnh</span>
                            </label>
                        </div>
                    </div>
                    <div ng-if="$ctrl.typeImage === 'crop'" class="form-group">
                        <div class="col-sm-8">
                            <div class="cropArea">
                                <img-crop image="$ctrl.avatarPath" result-image="$ctrl.myCroppedImage"></img-crop>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <img style="width: 100%" ng-src="{{$ctrl.myCroppedImage}}" />
                        </div>
                    </div>
                    <div ng-if="$ctrl.typeImage === 'unCrop'" class="form-group">
                        <div class="col-sm-8 col-sm-offset-2 text-center">
                            <!--<div class="cropArea text-center">-->
                            <img class="unCrop" ng-src="{{$ctrl.avatarPath}}" />
                            <!--</div>-->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger pull-left" ng-click="$ctrl.cancelAvatar()" data-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-primary" ng-click="$ctrl.selectAvatar()">Chọn</button>
                </div>
            </form>
        </div>
    </div>
</section>

<section class="modal fade in" id="modal-show-avatar" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-green">
                <button type="button" class="close close-custom" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">×</span>
                </button>
                <h4 class="modal-title">Ảnh đại diện</h4>
            </div>
            <form name="frmShowAvatar" class="form-horizontal">
                <div class="modal-body">
                    <div class="form-group">
                        <div class="col-sm-8 col-sm-offset-2 text-center">
                            <img class="unCrop" ng-src="{{$ctrl.context.userInfo.avatarPath ? $ctrl.context.userInfo.avatarPath : 'imgs/avatar.png'}}" />
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>
